        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Ray class / vector_math Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="vector_math" data-type="Ray">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../vector_math.html">vector_math</a> &rsaquo; <a href="../vector_math/Ray.html">Ray</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>Ray</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class Ray {
 final Vector3 _origin;
 final Vector3 _direction;

 Vector3 get origin =&gt; _origin;
 Vector3 get direction =&gt; _direction;

 Ray() :
   _origin = new Vector3.zero(),
   _direction = new Vector3.zero() {}

 Ray.copy(Ray other) :
   _origin = new Vector3.copy(other._origin),
   _direction = new Vector3.copy(other._direction) {}

 Ray.originDirection(Vector3 origin_, Vector3 direction_) :
   _origin = new Vector3.copy(origin_),
   _direction = new Vector3.copy(direction_) {}

 void copyOriginDirection(Vector3 origin_, Vector3 direction_) {
   origin_.setFrom(_origin);
   direction_.setFrom(_direction);
 }

 void copyFrom(Ray o) {
   _origin.setFrom(o._origin);
   _direction.setFrom(o._direction);
 }

 void copyInto(Ray o) {
   o._origin.setFrom(_origin);
   o._direction.setFrom(_direction);
 }

 /// Returns the position on [this] with a distance of [t] from [origin].
 Vector3 at(double t) {
   return _direction.scaled(t).add(_origin);
 }

 /// Return the distance from the origin of [this] to the intersection with
 /// [other] if [this] intersects with [other], or null if the don't intersect.
 double intersectsWithSphere(Sphere other) {
   final r2 = other.radius * other.radius;
   final l = other.center.clone().sub(origin);
   final s = l.dot(direction);
   final l2 = l.dot(l);
   if(s &lt; 0 &amp;&amp; l2 &gt; r2) {
     return null;
   }
   final m2 = l2 - s * s;
   if(m2 &gt; r2) {
     return null;
   }
   final q = Math.sqrt(r2 - m2);

   return (l2 &gt; r2) ? s - q : s + q;
 }

 /// Return the distance from the origin of [this] to the intersection with
 /// [other] if [this] intersects with [other], or null if the don't intersect.
 double intersectsWithTriangle(Triangle other) {
   const double EPSILON = 10e-6;

   final e1 = other.point1.clone().sub(other.point0);
   final e2 = other.point2.clone().sub(other.point0);

   final q = direction.cross(e2);
   final a = e1.dot(q);

   if(a &gt; -EPSILON &amp;&amp; a &lt; EPSILON) {
     return null;
   }

   final f = 1 / a;
   final s = origin.clone().sub(other.point0);
   final u = f * (s.dot(q));

   if(u &lt; 0.0) {
     return null;
   }

   final r = s.cross(e1);
   final v = f * (direction.dot(r));

   if(v &lt; -EPSILON || u + v &gt; 1.0+EPSILON) {
     return null;
   }

   final t = f * (e2.dot(r));

   return t;
 }

 /// Return the distance from the origin of [this] to the intersection with
 /// [other] if [this] intersects with [other], or null if the don't intersect.
 double intersectsWithAabb3(Aabb3 other) {
   Vector3 t1 = new Vector3.zero(), t2 = new Vector3.zero();
   double tNear = -double.MAX_FINITE;
   double tFar = double.MAX_FINITE;

   for(int i = 0; i &lt; 3; ++i){
     if(direction[i] == 0.0){
       if((origin[i] &lt; other.min[i]) || (origin[i] &gt; other.max[i])) {
         return null;
       }
     }
     else {
       t1[i] = (other.min[i] - origin[i]) / direction[i];
       t2[i] = (other.max[i] - origin[i]) / direction[i];

       if(t1[i] &gt; t2[i]){
         final temp = t1;
         t1 = t2;
         t2 = temp;
       }

       if(t1[i] &gt; tNear){
         tNear = t1[i];
       }

       if(t2[i] &lt; tFar){
         tFar = t2[i];
       }

       if((tNear &gt; tFar) || (tFar &lt; 0)){
         return null;
       }
     }
   }

   return tNear;
 }
}
</pre>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="">
<button class="show-code">Code</button>
new <strong>Ray</strong>() <a class="anchor-link" href="#"
              title="Permalink to Ray.Ray">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Creates a new <a class="crossref" href="../dart_core/Object.html">Object</a> instance.</p>
<p><a class="crossref" href="../dart_core/Object.html">Object</a> instances have no meaningful state, and are only useful
through their identity. An <a class="crossref" href="../dart_core/Object.html">Object</a> instance is equal to itself
only.</p>
<div class="docs-inherited-from">docs inherited from <a href="http://api.dartlang.org/dart_core/Object.html">Object</a> </div></div>
<pre class="source">
Ray() :
 _origin = new Vector3.zero(),
 _direction = new Vector3.zero() {}
</pre>
</div>
</div>
<div class="method"><h4 id="copy">
<button class="show-code">Code</button>
new <strong>Ray.copy</strong>(<a href="../vector_math/Ray.html">Ray</a> other) <a class="anchor-link" href="#copy"
              title="Permalink to Ray.Ray.copy">#</a></h4>
<div class="doc">
<pre class="source">
Ray.copy(Ray other) :
 _origin = new Vector3.copy(other._origin),
 _direction = new Vector3.copy(other._direction) {}
</pre>
</div>
</div>
<div class="method"><h4 id="originDirection">
<button class="show-code">Code</button>
new <strong>Ray.originDirection</strong>(<a href="../vector_math/Vector3.html">Vector3</a> origin_, <a href="../vector_math/Vector3.html">Vector3</a> direction_) <a class="anchor-link" href="#originDirection"
              title="Permalink to Ray.Ray.originDirection">#</a></h4>
<div class="doc">
<pre class="source">
Ray.originDirection(Vector3 origin_, Vector3 direction_) :
 _origin = new Vector3.copy(origin_),
 _direction = new Vector3.copy(direction_) {}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="direction">
<button class="show-code">Code</button>
final <a href="../vector_math/Vector3.html">Vector3</a>         <strong>direction</strong> <a class="anchor-link"
            href="#direction"
            title="Permalink to Ray.direction">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Vector3 get direction =&gt; _direction;
</pre>
</div>
</div>
<div class="field"><h4 id="origin">
<button class="show-code">Code</button>
final <a href="../vector_math/Vector3.html">Vector3</a>         <strong>origin</strong> <a class="anchor-link"
            href="#origin"
            title="Permalink to Ray.origin">#</a>
        </h4>
        <div class="doc">
<pre class="source">
Vector3 get origin =&gt; _origin;
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="at">
<button class="show-code">Code</button>
<a href="../vector_math/Vector3.html">Vector3</a> <strong>at</strong>(<a href="http://api.dartlang.org/dart_core/double.html">double</a> t) <a class="anchor-link" href="#at"
              title="Permalink to Ray.at">#</a></h4>
<div class="doc">
<p>Returns the position on <code>this</code> with a distance of 
<span class="param">t</span> from <a class="crossref" href="../vector_math/Ray.html#origin">origin</a>.</p>
<pre class="source">
Vector3 at(double t) {
 return _direction.scaled(t).add(_origin);
}
</pre>
</div>
</div>
<div class="method"><h4 id="copyFrom">
<button class="show-code">Code</button>
void <strong>copyFrom</strong>(<a href="../vector_math/Ray.html">Ray</a> o) <a class="anchor-link" href="#copyFrom"
              title="Permalink to Ray.copyFrom">#</a></h4>
<div class="doc">
<pre class="source">
void copyFrom(Ray o) {
 _origin.setFrom(o._origin);
 _direction.setFrom(o._direction);
}
</pre>
</div>
</div>
<div class="method"><h4 id="copyInto">
<button class="show-code">Code</button>
void <strong>copyInto</strong>(<a href="../vector_math/Ray.html">Ray</a> o) <a class="anchor-link" href="#copyInto"
              title="Permalink to Ray.copyInto">#</a></h4>
<div class="doc">
<pre class="source">
void copyInto(Ray o) {
 o._origin.setFrom(_origin);
 o._direction.setFrom(_direction);
}
</pre>
</div>
</div>
<div class="method"><h4 id="copyOriginDirection">
<button class="show-code">Code</button>
void <strong>copyOriginDirection</strong>(<a href="../vector_math/Vector3.html">Vector3</a> origin_, <a href="../vector_math/Vector3.html">Vector3</a> direction_) <a class="anchor-link" href="#copyOriginDirection"
              title="Permalink to Ray.copyOriginDirection">#</a></h4>
<div class="doc">
<pre class="source">
void copyOriginDirection(Vector3 origin_, Vector3 direction_) {
 origin_.setFrom(_origin);
 direction_.setFrom(_direction);
}
</pre>
</div>
</div>
<div class="method"><h4 id="intersectsWithAabb3">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/double.html">double</a> <strong>intersectsWithAabb3</strong>(<a href="../vector_math/Aabb3.html">Aabb3</a> other) <a class="anchor-link" href="#intersectsWithAabb3"
              title="Permalink to Ray.intersectsWithAabb3">#</a></h4>
<div class="doc">
<p>Return the distance from the origin of <code>this</code> to the intersection with

<span class="param">other</span> if <code>this</code> intersects with 
<span class="param">other</span>, or null if the don't intersect.</p>
<pre class="source">
double intersectsWithAabb3(Aabb3 other) {
 Vector3 t1 = new Vector3.zero(), t2 = new Vector3.zero();
 double tNear = -double.MAX_FINITE;
 double tFar = double.MAX_FINITE;

 for(int i = 0; i &lt; 3; ++i){
   if(direction[i] == 0.0){
     if((origin[i] &lt; other.min[i]) || (origin[i] &gt; other.max[i])) {
       return null;
     }
   }
   else {
     t1[i] = (other.min[i] - origin[i]) / direction[i];
     t2[i] = (other.max[i] - origin[i]) / direction[i];

     if(t1[i] &gt; t2[i]){
       final temp = t1;
       t1 = t2;
       t2 = temp;
     }

     if(t1[i] &gt; tNear){
       tNear = t1[i];
     }

     if(t2[i] &lt; tFar){
       tFar = t2[i];
     }

     if((tNear &gt; tFar) || (tFar &lt; 0)){
       return null;
     }
   }
 }

 return tNear;
}
</pre>
</div>
</div>
<div class="method"><h4 id="intersectsWithSphere">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/double.html">double</a> <strong>intersectsWithSphere</strong>(<a href="../vector_math/Sphere.html">Sphere</a> other) <a class="anchor-link" href="#intersectsWithSphere"
              title="Permalink to Ray.intersectsWithSphere">#</a></h4>
<div class="doc">
<p>Return the distance from the origin of <code>this</code> to the intersection with

<span class="param">other</span> if <code>this</code> intersects with 
<span class="param">other</span>, or null if the don't intersect.</p>
<pre class="source">
double intersectsWithSphere(Sphere other) {
 final r2 = other.radius * other.radius;
 final l = other.center.clone().sub(origin);
 final s = l.dot(direction);
 final l2 = l.dot(l);
 if(s &lt; 0 &amp;&amp; l2 &gt; r2) {
   return null;
 }
 final m2 = l2 - s * s;
 if(m2 &gt; r2) {
   return null;
 }
 final q = Math.sqrt(r2 - m2);

 return (l2 &gt; r2) ? s - q : s + q;
}
</pre>
</div>
</div>
<div class="method"><h4 id="intersectsWithTriangle">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/double.html">double</a> <strong>intersectsWithTriangle</strong>(<a href="../vector_math/Triangle.html">Triangle</a> other) <a class="anchor-link" href="#intersectsWithTriangle"
              title="Permalink to Ray.intersectsWithTriangle">#</a></h4>
<div class="doc">
<p>Return the distance from the origin of <code>this</code> to the intersection with

<span class="param">other</span> if <code>this</code> intersects with 
<span class="param">other</span>, or null if the don't intersect.</p>
<pre class="source">
double intersectsWithTriangle(Triangle other) {
 const double EPSILON = 10e-6;

 final e1 = other.point1.clone().sub(other.point0);
 final e2 = other.point2.clone().sub(other.point0);

 final q = direction.cross(e2);
 final a = e1.dot(q);

 if(a &gt; -EPSILON &amp;&amp; a &lt; EPSILON) {
   return null;
 }

 final f = 1 / a;
 final s = origin.clone().sub(other.point0);
 final u = f * (s.dot(q));

 if(u &lt; 0.0) {
   return null;
 }

 final r = s.cross(e1);
 final v = f * (direction.dot(r));

 if(v &lt; -EPSILON || u + v &gt; 1.0+EPSILON) {
   return null;
 }

 final t = f * (e2.dot(r));

 return t;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
